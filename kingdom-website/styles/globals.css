/* All @import rules MUST be at the top of the stylesheet */
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700;800;900&family=Montserrat+Subrayada:wght@400;700&family=Roboto+Condensed:wght@300;400;700&display=swap');
@import 'tailwindcss/base';
@import 'tailwindcss/components';
@import 'tailwindcss/utilities';

@layer base {
  :root {
    --navy: #131416;
    --blue: #b7c6e0;
    --gray: #2d2f34;
    --white: #ffffff;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    background-color: var(--navy);
    color: var(--white);
    margin: 0;
    overflow-x: hidden;
    padding-top: 58px; /* Account for fixed header (10% thinner) */
  }
  
  /* Clean sans-serif throughout */
  * {
    font-family: 'Montserrat', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  }

  /* All headings use Montserrat Light (like KINGDOM COLLECTIVE) */
  h1, h2, h3, h4, h5, h6 {
    font-family: 'Montserrat', sans-serif !important;
    font-weight: 300 !important;
    text-shadow: 0 3px 12px rgba(46, 9, 63, 1), 0 1px 4px rgba(0, 0, 0, 0.8);
  }

  /* Body text directly under headings also gets shadow for readability */
  h1 + p, h2 + p, h3 + p, h4 + p, h5 + p, h6 + p,
  h1 + div > p, h2 + div > p, h3 + div > p, h4 + div > p, h5 + div > p, h6 + div > p {
    text-shadow: 0 2px 8px rgba(46, 9, 63, 0.9), 0 1px 3px rgba(0, 0, 0, 0.7);
  }

  /* Remove shadow from headings and text inside cards/boxes */
  .card-standard h1, .card-standard h2, .card-standard h3, .card-standard h4, .card-standard h5, .card-standard h6, .card-standard p,
  .card-elevated h1, .card-elevated h2, .card-elevated h3, .card-elevated h4, .card-elevated h5, .card-elevated h6, .card-elevated p,
  .card-glass h1, .card-glass h2, .card-glass h3, .card-glass h4, .card-glass h5, .card-glass h6, .card-glass p,
  .bg-black h1, .bg-black h2, .bg-black h3, .bg-black h4, .bg-black h5, .bg-black h6, .bg-black p,
  [class*="bg-black/"] h1, [class*="bg-black/"] h2, [class*="bg-black/"] h3, [class*="bg-black/"] h4, [class*="bg-black/"] h5, [class*="bg-black/"] h6, [class*="bg-black/"] p {
    text-shadow: none;
  }
  
  /* Condensed font for specific elements */
  .font-condensed {
    font-family: 'Roboto Condensed', 'Montserrat', sans-serif;
  }

  /* Opaque fallback for browsers without backdrop-filter support */
  @supports not ((-webkit-backdrop-filter: none) or (backdrop-filter: none)) {
    .no-blur-fallback {
      background: rgba(20,10,28,0.55) !important; /* Slightly darker for readability */
    }
  }
}

@layer components {
  /* Glassmorphism effects */
  .glass {
    @apply bg-white/10 backdrop-blur-sm border border-white/20;
  }

  .glass-dark {
    @apply bg-black/30 backdrop-blur-sm border border-navy/50;
  }

  /* Glow effects */
  .glow-blue {
    @apply text-blue font-bold;
  }

  /* Button styles */
  .btn-primary {
    @apply bg-blue text-navy px-6 py-3 rounded-lg font-bold hover:bg-blue/90 transition-all duration-200;
  }

  .btn-secondary {
    @apply bg-transparent border border-blue text-blue px-6 py-3 rounded-lg font-bold hover:bg-blue hover:text-navy transition-all duration-200;
  }

  /* Card styles */
  .card-hover {
    @apply hover:scale-105 hover:shadow-2xl transition-all duration-300;
  }

  /* Text styles */
  .text-gradient {
    @apply bg-gradient-to-r from-kingdom-gold to-kingdom-orange bg-clip-text text-transparent;
  }

  /* Animation delays */
  .delay-1000 {
    animation-delay: 1s;
  }

  .delay-2000 {
    animation-delay: 2s;
  }

  /* Consistent card styling */
  .card-standard {
    @apply bg-black/20 backdrop-blur-sm rounded-xl p-6 border border-white/10;
  }

  .card-elevated {
    @apply bg-black/30 backdrop-blur-sm rounded-xl p-6 border border-white/20 shadow-xl;
  }

  .card-glass {
    @apply bg-white/5 backdrop-blur-sm rounded-xl p-6 border border-white/10;
  }

  /* Consistent button styling */
  .btn-kingdom-primary {
    @apply bg-gradient-to-r from-kingdom-gold to-kingdom-orange text-kingdom-dark px-6 py-3 rounded-lg font-bold hover:scale-105 accessible-button transition-all duration-200;
  }

  .btn-kingdom-secondary {
    @apply bg-transparent border border-kingdom-gold text-kingdom-gold px-6 py-3 rounded-lg font-bold hover:bg-kingdom-gold hover:text-kingdom-dark accessible-button transition-all duration-200;
  }

  .btn-kingdom-outline {
    @apply bg-transparent border border-white/30 text-white px-6 py-3 rounded-lg font-bold hover:bg-white/10 accessible-button transition-all duration-200;
  }

  /* Consistent text styling */
  .text-heading-primary {
    @apply text-white text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-black leading-tight tracking-[-0.033em];
  }

  .text-heading-secondary {
    @apply text-kingdom-gold text-xl sm:text-2xl md:text-3xl font-bold leading-tight;
  }

  .text-body-primary {
    @apply text-white text-sm sm:text-base font-normal leading-relaxed;
  }

  .text-body-secondary {
    @apply text-white/70 text-sm font-normal leading-relaxed;
  }

  /* Consistent spacing */
  .section-padding {
    @apply px-4 sm:px-6 md:px-8 lg:px-12 xl:px-40 py-12 sm:py-16 md:py-20;
  }

  .container-standard {
    @apply max-w-[960px] mx-auto;
  }

  .container-wide {
    @apply max-w-[1200px] mx-auto;
  }

  /* Consistent form styling */
  .input-standard {
    @apply bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/50 accessible-input transition-all duration-200;
  }

  .textarea-standard {
    @apply bg-black/30 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-white/50 accessible-input transition-all duration-200 resize-none;
  }

  /* Consistent navigation styling */
  .nav-link {
    @apply text-white text-sm font-medium leading-normal hover:text-blue accessible-link transition-colors duration-200;
  }

  .nav-dropdown {
    @apply absolute top-full left-0 mt-2 w-64 backdrop-blur-sm border border-white/30 rounded-xl py-2 z-50 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200;
    background: rgba(155, 93, 229, 0.85);
  }

  .nav-dropdown-item {
    @apply block px-4 py-2 text-white accessible-link transition-colors duration-200;
  }
  
  .nav-dropdown-item:hover {
    background: rgba(194, 155, 255, 0.4);
  }

  /* Consistent chat styling */
  .chat-container {
    @apply fixed bottom-4 right-4 w-80 h-96 bg-[#2E093F]/70 backdrop-blur-md border border-white/30 rounded-xl shadow-2xl z-50;
  }

  /* Mobile responsive chat */
  @media (max-width: 768px) {
    .chat-container {
      @apply fixed inset-4 w-auto h-auto max-w-none max-h-none bg-[#2E093F]/70 backdrop-blur-md border border-white/30 rounded-xl shadow-2xl z-50;
    }
  }

  /* Ensure chat doesn't cover important content */
  @media (min-width: 769px) {
    .chat-container {
      @apply fixed bottom-6 right-6 w-96 h-[500px] bg-[#2E093F]/70 backdrop-blur-md border border-white/30 rounded-xl shadow-2xl z-50;
    }
  }

  .chat-message {
    @apply mb-4 p-3 rounded-lg max-w-[85%];
  }

  .chat-message-user {
    @apply bg-blue text-navy ml-auto;
  }

  .chat-message-assistant {
    @apply bg-navy text-white;
  }

  .chat-input {
    @apply w-full bg-navy/50 border border-white/30 rounded-lg px-4 py-2 text-white placeholder-white/40 focus:border-blue focus:outline-none;
  }

  /* Consistent icon styling */
  .icon-standard {
    @apply text-3xl sm:text-4xl mb-4;
  }

  .icon-small {
    @apply text-2xl sm:text-3xl mb-3;
  }

  .icon-large {
    @apply text-4xl sm:text-5xl mb-6;
  }

  .svg-icon-standard {
    @apply w-5 h-5 text-kingdom-gold mr-3;
  }

  .svg-icon-small {
    @apply w-4 h-4 text-kingdom-gold mr-2;
  }

  .svg-icon-large {
    @apply w-6 h-6 text-kingdom-gold mr-4;
  }

  /* Consistent animation styling */
  .animate-standard {
    @apply transition-all duration-200;
  }

  .animate-slow {
    @apply transition-all duration-300;
  }

  .animate-fast {
    @apply transition-all duration-150;
  }

  .hover-scale {
    @apply hover:scale-105 transition-all duration-200;
  }

  .hover-scale-slow {
    @apply hover:scale-105 transition-all duration-300;
  }

  .hover-elevate {
    @apply hover:bg-black/30 transition-all duration-300;
  }

  .hover-glow {
    @apply hover:shadow-lg hover:shadow-kingdom-gold/30 transition-all duration-200;
  }

  /* Consistent accessibility styling */
  .focus-kingdom {
    @apply focus:outline-none focus:border-kingdom-gold focus:ring-2 focus:ring-kingdom-gold/50;
  }

  .focus-kingdom-soft {
    @apply focus:outline-none focus:border-kingdom-gold/50 focus:ring-1 focus:ring-kingdom-gold/30;
  }

  .sr-only {
    @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0;
  }

  .skip-link {
    @apply absolute -top-10 left-6 bg-kingdom-gold text-kingdom-dark px-4 py-2 rounded-md z-50 focus:top-6 transition-all duration-200;
  }

  .accessible-button {
    @apply focus-kingdom focus:ring-offset-2 focus:ring-offset-navy;
  }

  .accessible-link {
    @apply focus-kingdom-soft focus:ring-offset-1 focus:ring-offset-navy;
  }

  .accessible-input {
    @apply focus-kingdom focus:ring-offset-2 focus:ring-offset-navy;
  }
}

@layer utilities {
  .animate-float {
    animation: float 6s ease-in-out infinite;
  }
}

@keyframes float {
  0%, 100% {
    transform: translateY(0px) rotate(0deg);
  }
  50% {
    transform: translateY(-20px) rotate(5deg);
  }
}

/* Flame animations for sales bot */
@keyframes flicker {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  25% {
    opacity: 0.8;
    transform: scale(0.95);
  }
  50% {
    opacity: 1;
    transform: scale(1.05);
  }
  75% {
    opacity: 0.9;
    transform: scale(0.98);
  }
}

@keyframes glow {
  0%, 100% {
    filter: drop-shadow(0 0 5px rgba(255, 165, 0, 0.5));
  }
  50% {
    filter: drop-shadow(0 0 15px rgba(255, 165, 0, 0.8));
  }
}

/* Custom flame animations */
@keyframes flame {
  0%, 100% {
    transform: scale(1);
    filter: drop-shadow(0 0 8px #facc15);
  }
  50% {
    transform: scale(1.08);
    filter: drop-shadow(0 0 12px #f97316);
  }
}

.animate-flame {
  animation: flame 1.8s ease-in-out infinite;
}

/* Realistic flame flicker animation */
@keyframes flameFlicker {
  0%, 100% {
    transform: scale(1) rotate(0deg);
    filter: drop-shadow(0 0 6px #facc15);
  }
  50% {
    transform: scale(1.05) rotate(-1deg);
    filter: drop-shadow(0 0 12px #f97316);
  }
}

.flame {
  animation: flameFlicker 1.2s infinite ease-in-out;
  transform-origin: center;
}

@keyframes flame-glow {
  0%, 100% {
    box-shadow: 
      0 0 10px rgba(255, 165, 0, 0.3),
      0 0 20px rgba(255, 69, 0, 0.2),
      0 0 30px rgba(255, 215, 0, 0.1);
  }
  25% {
    box-shadow: 
      0 0 15px rgba(255, 165, 0, 0.4),
      0 0 30px rgba(255, 69, 0, 0.3),
      0 0 45px rgba(255, 215, 0, 0.2);
  }
  50% {
    box-shadow: 
      0 0 20px rgba(255, 165, 0, 0.6),
      0 0 40px rgba(255, 69, 0, 0.4),
      0 0 60px rgba(255, 215, 0, 0.3);
  }
  75% {
    box-shadow: 
      0 0 15px rgba(255, 165, 0, 0.4),
      0 0 30px rgba(255, 69, 0, 0.3),
      0 0 45px rgba(255, 215, 0, 0.2);
  }
}

.animate-flame-glow {
  animation: flame-glow 2s ease-in-out infinite;
}

/* Kingdom Gold Flame */
.kingdom-flame {
  position: relative;
  width: 60px;
  height: 70px;
  animation: flameFlicker 1.2s infinite ease-in-out;
}

.flame-body {
  position: absolute;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 50px;
  height: 60px;
  background: linear-gradient(
    to top,
    #FFB347 0%,      /* Amber base */
    #FFD580 25%,     /* Warm gold */
    #FFF6E8 50%,     /* Light gold */
    #C29BFF 75%,     /* Amethyst tip */
    #9B5DE5 100%     /* Purple top */
  );
  border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
  filter: blur(1px);
  box-shadow: 
    0 0 20px rgba(255, 179, 71, 0.6),
    0 0 40px rgba(255, 213, 128, 0.4),
    0 0 60px rgba(194, 155, 255, 0.3);
  animation: flameDance 1.5s ease-in-out infinite;
}

.flame-core {
  position: absolute;
  bottom: 8px;
  left: 50%;
  transform: translateX(-50%);
  width: 30px;
  height: 40px;
  background: linear-gradient(
    to top,
    #FFF6E8 0%,      /* White-gold base */
    #FFD580 50%,     /* Golden middle */
    rgba(255, 246, 232, 0.5) 100%  /* Transparent top */
  );
  border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
  filter: blur(2px);
  animation: flameCore 1.8s ease-in-out infinite;
}

@keyframes flameDance {
  0%, 100% {
    transform: translateX(-50%) scaleY(1) scaleX(1);
  }
  25% {
    transform: translateX(-48%) scaleY(1.05) scaleX(0.98);
  }
  50% {
    transform: translateX(-52%) scaleY(0.98) scaleX(1.02);
  }
  75% {
    transform: translateX(-50%) scaleY(1.02) scaleX(0.99);
  }
}

@keyframes flameCore {
  0%, 100% {
    opacity: 0.9;
    transform: translateX(-50%) scaleY(1);
  }
  50% {
    opacity: 1;
    transform: translateX(-50%) scaleY(1.08);
  }
}

/* Custom Sword Cursor */
* {
  cursor: url('/sword-cursor-enhanced.svg') 4 4, auto;
}

/* Cursor particles */
.cursor-flame-particle {
  border-radius: 50%;
  background: radial-gradient(circle, #FFD580 0%, #FFB347 50%, rgba(255, 179, 71, 0) 100%);
  box-shadow: 0 0 8px rgba(255, 213, 128, 0.6);
  pointer-events: none;
  animation: flameParticleFade 0.6s ease-out forwards;
}

.cursor-bokeh-particle {
  border-radius: 50%;
  background: radial-gradient(circle, #FFF6E8 0%, #C29BFF 50%, rgba(194, 155, 255, 0) 100%);
  box-shadow: 0 0 6px rgba(255, 246, 232, 0.4);
  pointer-events: none;
  animation: bokehParticleFade 0.8s ease-out forwards;
}

@keyframes flameParticleFade {
  0% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
  100% {
    transform: translate(-50%, -60%) scale(0.3);
    opacity: 0;
  }
}

@keyframes bokehParticleFade {
  0% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 0.8;
  }
  100% {
    transform: translate(-50%, -55%) scale(0.5);
    opacity: 0;
  }
}

/* Ember particles for warrior sword */
#embers .ember {
  position: absolute;
  border-radius: 9999px;
  opacity: 0.55;
  background: #FFB347;
  pointer-events: none;
}

/* Custom scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: var(--navy);
}

::-webkit-scrollbar-thumb {
  background: var(--gray);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #555555;
}